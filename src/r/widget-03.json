{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "widget-03",
  "type": "registry:block",
  "title": "Widget 03",
  "description": "A latest deal widget block",
  "dependencies": [
    "motion"
  ],
  "registryDependencies": [
    "card",
    "badge",
    "progress"
  ],
  "files": [
    {
      "path": "src/components/shadcn-space/blocks/widget-03/page.tsx",
      "content": "import Widget03 from \"@/components/shadcn-space/blocks/widget-03/widget03\"\r\n\r\nexport default function Page() {\r\n    return (\r\n        <div>\r\n            <Widget03 />\r\n        </div>\r\n    )\r\n}\r\n",
      "type": "registry:page",
      "target": "app/widget-03/page.tsx"
    },
    {
      "path": "src/components/shadcn-space/blocks/widget-03/widget03.tsx",
      "content": "'use client'\r\n\r\nimport React, { useRef, useEffect, useState } from 'react'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Card } from '@/components/ui/card'\r\nimport { motion, useMotionValue, animate, useTransform, useInView } from 'motion/react'\r\n\r\n// -------------------- Animated Counter --------------------\r\nfunction AnimatedCounter({\r\n  value,\r\n  prefix = '',\r\n  suffix = '',\r\n  isInView = true,\r\n}: {\r\n  value: number\r\n  prefix?: string\r\n  suffix?: string\r\n  isInView?: boolean\r\n}) {\r\n  const count = useMotionValue(0)\r\n  const rounded = useTransform(count, (latest) => Math.round(latest))\r\n  const [current, setCurrent] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if (isInView) {\r\n      const controls = animate(count, value, {\r\n        duration: 2,\r\n        ease: 'easeOut',\r\n        onUpdate(latest) {\r\n          setCurrent(Math.round(latest))\r\n        },\r\n      })\r\n      return controls.stop\r\n    }\r\n  }, [isInView, value, count])\r\n\r\n  return (\r\n    <span>\r\n      {prefix}\r\n      {current.toLocaleString()}\r\n      {suffix}\r\n    </span>\r\n  )\r\n}\r\n\r\n// -------------------- Animated Progress --------------------\r\nconst AnimatedProgress = ({ value, color }: { value: number; color: string }) => {\r\n  const ref = useRef<HTMLDivElement>(null)\r\n  const isInView = useInView(ref, { once: true, amount: 0.5 })\r\n  const progress = useMotionValue(0)\r\n  const [current, setCurrent] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if (isInView) {\r\n      const controls = animate(progress, value, {\r\n        duration: 1.5,\r\n        ease: 'easeOut',\r\n        onUpdate(latest) {\r\n          setCurrent(latest)\r\n        },\r\n      })\r\n      return controls.stop\r\n    }\r\n  }, [isInView, value, progress])\r\n\r\n  return (\r\n    <div ref={ref}>\r\n      <Progress\r\n        value={current}\r\n        className={`h-1 ${color} transition-all duration-500 ease-out`}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\n// -------------------- Animated Tooltip --------------------\r\nfunction AnimatedTooltip({ children, text }: { children: React.ReactNode; text: string }) {\r\n  const [isHovered, setIsHovered] = useState(false)\r\n  const x = useMotionValue(0)\r\n  const rotate = useMotionValue(0)\r\n  const springConfig = { stiffness: 100, damping: 15 }\r\n\r\n  const handleMouseMove = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    const rect = event.currentTarget.getBoundingClientRect()\r\n    const centerX = rect.left + rect.width / 2\r\n    const offsetX = event.clientX - centerX\r\n    x.set(offsetX * 0.5)\r\n    rotate.set(offsetX * 0.5)\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className='relative'\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => {\r\n        setIsHovered(false)\r\n        x.set(0)\r\n        rotate.set(0)\r\n      }}\r\n      onMouseMove={handleMouseMove}\r\n    >\r\n      {children}\r\n      {isHovered && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20, scale: 0.6 }}\r\n          animate={{ opacity: 1, y: 0, scale: 1 }}\r\n          exit={{ opacity: 0, y: 20, scale: 0.6 }}\r\n          transition={springConfig}\r\n          style={{ x, rotate, transformOrigin: 'bottom center' }}\r\n          className='absolute -top-10 left-1/2 -translate-x-1/2 z-50 pointer-events-none'\r\n        >\r\n          <div className='relative bg-background text-foreground px-4 py-2 rounded-md text-xs font-bold whitespace-nowrap shadow-xl'>\r\n            {text}\r\n            <div className='absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-background rotate-45' />\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// -------------------- Main Widget --------------------\r\nconst Widget03 = () => {\r\n  const ref = useRef(null)\r\n  const isInView = useInView(ref, { once: true, amount: 0.3 })\r\n\r\n  const userImg = [\r\n    { user: 'https://images.shadcnspace.com/assets/profiles/user-2.jpg', name: 'Sarah Johnson' },\r\n    { user: 'https://images.shadcnspace.com/assets/profiles/user-3.jpg', name: 'Michael Chen' },\r\n    { user: 'https://images.shadcnspace.com/assets/profiles/user-4.jpg', name: 'Emma Davis' },\r\n    { user: 'https://images.shadcnspace.com/assets/profiles/user-7.jpg', name: 'James Wilson' },\r\n  ]\r\n\r\n  return (\r\n    <div className='min-h-screen flex items-center justify-center px-6'>\r\n      <Card ref={ref} className='p-6 w-full max-w-xs'>\r\n        {/* Header */}\r\n        <div className='flex items-baseline justify-between'>\r\n          <div>\r\n            <h5 className='text-lg font-semibold text-foreground'>Latest Deal</h5>\r\n            <p className='text-sm font-normal text-muted-foreground'>Last 7 days</p>\r\n          </div>\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.5 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ delay: 0.2, type: 'spring', stiffness: 200 }}\r\n          >\r\n            <Badge className='bg-sky-400/10 text-sky-400'>86.5%</Badge>\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Amount & Progress */}\r\n        <div className='flex flex-col gap-2'>\r\n          <div className='flex items-center justify-between'>\r\n            <h6 className='text-base font-semibold text-foreground'>\r\n              <AnimatedCounter value={98500} prefix='$' isInView={isInView} />\r\n            </h6>\r\n            <h6 className='text-base font-semibold text-foreground'>$1,22,900</h6>\r\n          </div>\r\n          <AnimatedProgress value={80} color='**:data-[slot=progress-indicator]:bg-teal-500' />\r\n          <p className='text-sm font-normal text-muted-foreground'>Coupons used: 18/22</p>\r\n        </div>\r\n\r\n        {/* Recent Purchasers */}\r\n        <div className='flex flex-col gap-2'>\r\n          <h5 className='text-sm font-semibold text-foreground'>Recent Purchasers</h5>\r\n          <div className='flex -space-x-2'>\r\n            {userImg.map((item, index) => (\r\n              <AnimatedTooltip key={index} text={item.name}>\r\n                <motion.div\r\n                  className='h-10 w-10 cursor-pointer'\r\n                  initial={{ opacity: 0, scale: 0, y: 20 }}\r\n                  animate={isInView ? { opacity: 1, scale: 1, y: 0 } : {}}\r\n                  whileHover={{ scale: 1.15, zIndex: 10 }}\r\n                  transition={{ type: 'spring', stiffness: 300 }}\r\n                >\r\n                  <img\r\n                    src={item.user}\r\n                    className='border-2 border-border rounded-full'\r\n                    alt={item.name}\r\n                    width={40}\r\n                    height={40}\r\n                  />\r\n                </motion.div>\r\n              </AnimatedTooltip>\r\n            ))}\r\n            <AnimatedTooltip text='8 more users'>\r\n              <motion.div\r\n                className='h-10 w-10 flex justify-center items-center rounded-full border-2 border-border bg-blue-500/10 text-blue-500 cursor-pointer'\r\n                initial={{ opacity: 0, scale: 0, y: 20 }}\r\n                animate={isInView ? { opacity: 1, scale: 1, y: 0 } : {}}\r\n                whileHover={{ scale: 1.15, zIndex: 10 }}\r\n                transition={{ type: 'spring', stiffness: 300 }}\r\n              >\r\n                +8\r\n              </motion.div>\r\n            </AnimatedTooltip>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Widget03\r\n",
      "type": "registry:component",
      "target": "components/shadcn-space/blocks/widget-03/widget03.tsx"
    }
  ]
}